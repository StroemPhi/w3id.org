Header set Access-Control-Allow-Origin *
Options +FollowSymLinks
RewriteEngine on

# Notes on used flags:
# NC - sets case-insensitive matching
# NE - noescape, prevents that special characters, such as & and ?, will be converted to their hexcode equivalent for rules that result in external redirects.
# L - last, tells mod_rewrite to stop processing further rules sets.
# R=303 - status code for "See Other". It indicates that the redirects don't link to the requested resource itself, but to another page.

# BASE: Visit homepage
RewriteRule ^$ https://nfdi-de.github.io/dcat-ap-plus/elements/ [R=303,L]

# Schema rewrite rule
RewriteRule ^(.*)\.yaml$ https://nfdi-de.github.io/dcat-ap-plus/$1.yaml

RewriteCond %{REQUEST_URI} !\.[^./]+$
RewriteCond %{HTTP_ACCEPT} text/yaml
RewriteRule ^(.*[^/])$ $1.yaml [L]

# ChemDCAT-AP: HTML - documentation
RewriteCond %{HTTP_ACCEPT} text/html
RewriteRule ^(.*)$ https://nfdi-de.github.io/dcat-ap-plus/elements/$1 [R=302,L]
